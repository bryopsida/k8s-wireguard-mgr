---
apiVersion: batch/v1
kind: Job
metadata:
  name: verify-secret-created
spec:
  template:
    spec:
      serviceAccountName: secret-mgr-sa
      containers:
      - name: k8s-wg-mgr-test
        image: ghcr.io/curium-rocks/wg-kubectl:main
        env:
        - name: K8S_WG_MGR_SERVER_SECRET_NAME
          value: "test-wg-secret"
        command:
          - kubectl
          - get
          - secret
          - test-wg-secret
      restartPolicy: Never
